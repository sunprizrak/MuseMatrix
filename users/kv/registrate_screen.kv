#:import SlideTransition kivymd.uix.transition.transition.MDSlideTransition

<RegistrateScreen@MDScreen>
    name: 'reg_screen'

    core: app

    MDFloatLayout:

        MDIconButton:
            icon: 'arrow-left-bold'
            theme_text_color: 'Secondary'
            pos_hint: {'y': .9}
            on_release:
                app.root.transition = MDSlideTransition()
                app.root.transition.direction = 'right'
                app.root.current = 'start_screen'
                email_field.text = ''
                password_field.text = ''
                re_password_field.text = ''

        MDBoxLayout:
            orientation: 'vertical'
            spacing: 15
            pos_hint: {'center_x': .5, 'center_y': .5}
            size_hint: .8, .8
            size_hint_max_x: 300

            MDLabel:
                text: 'Создание учётной записи'
                theme_text_color: 'Secondary'
                font_size: dp(17)
                halign: 'center'

            MDTextField:
                id: email_field
                hint_text: 'email'
                icon_left: 'email'
                pos_hint: {'center_x': .5}
                helper_text_mode: 'on_error'

            MDRelativeLayout:
                size_hint: 1, None
                height: password_field.height
                pos_hint: {'center_x': .5}

                MDTextField:
                    id: password_field
                    hint_text: 'Password'
                    icon_left: 'key-variant'
                    password: True
                    helper_text_mode: 'on_error'

                MDIconButton:
                    icon: "eye-off"
                    pos_hint: {"center_y": .5}
                    pos: password_field.width - self.width, 0
                    theme_text_color: "Hint"
                    on_release:
                        self.icon = "eye" if self.icon == "eye-off" else "eye-off"
                        password_field.password = False if password_field.password is True else True

            MDRelativeLayout:
                size_hint: 1, None
                height: re_password_field.height
                pos_hint: {'center_x': .5}

                MDTextField:
                    id: re_password_field
                    hint_text: 'Password repeat'
                    icon_left: 'key-variant'
                    password: True
                    helper_text_mode: 'on_error'

                MDIconButton:
                    icon: "eye-off"
                    pos_hint: {"center_y": .5}
                    pos: re_password_field.width - self.width, 0
                    theme_text_color: "Hint"
                    on_release:
                        self.icon = "eye" if self.icon == "eye-off" else "eye-off"
                        re_password_field.password = False if re_password_field.password is True else True

            MDRaisedButton:
                text: 'Registrate'
                font_size: 15
                font_style: 'Button'
                md_bg_color: 'green'
                pos_hint: {'center_x': .5}
                on_release:
                    root.registrate(email_field.text, password_field.text, re_password_field.text)