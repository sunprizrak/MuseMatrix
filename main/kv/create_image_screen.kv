#:import CreateImageScreen main.screens

<CreateImageScreen>
    name: 'create_image_screen'
    md_bg_color: app.theme_cls.bg_light

    default_img: default_img
    prompt: input_prompt.text

    MDFloatLayout:

        MDBoxLayout:
            orientation: 'vertical'

            MDTopAppBar:
                id: create_top_bar
                type_height: 'small'
                md_bg_color: root.md_bg_color
                left_action_items: [['arrow-left-bold', lambda x: app.back(screen='main_screen')]]
                elevation: 0

            MDBoxLayout:
                id: image_section

                Image:
                    id: default_img
                    source: 'main/img/default.png'
                    mipmap: True

            MDBoxLayout:
                id: option_section
                orientation: 'vertical'
                adaptive_height: True
                spacing: dp(10)
                padding: dp(15)

                MySegmentedControl:
                    pos_hint: {'center_x': .5}
                    md_bg_color: app.theme_cls.primary_color
                    segment_color: root.md_bg_color
                    separator_color: "white"
                    radius: dp(5)
                    on_active:
                        root.image_size = self.current_active_segment.text

                    MDSegmentedControlItem:
                        text: '256x256'

                    MDSegmentedControlItem:
                        text: '512x512'

                    MDSegmentedControlItem:
                        text: '1024x1024'

                MDBoxLayout:
                    orientation: 'horizontal'
                    pos_hint: {'center_x': .5}
                    size_hint_x: None
                    width: dp(150)
                    adaptive_height: True

                    MDIconButton:
                        icon: 'minus-box-outline'
                        icon_size: sp(30)
                        theme_icon_color: "Custom"
                        icon_color: app.theme_cls.primary_color
                        on_release:
                            root.image_count -= 1

                    MDLabel:
                        id: img_count
                        text: str(root.image_count)
                        font_size: sp(30)
                        halign: 'center'


                    MDIconButton:
                        icon: 'plus-box-outline'
                        icon_size: sp(30)
                        theme_icon_color: "Custom"
                        icon_color: app.theme_cls.primary_color
                        on_release:
                            root.image_count += 1

                MDTextFieldRect:
                    id: input_prompt
                    multiline: True
                    auto_indent: True
                    size_hint_y: None
                    height: dp(100)
                    pos_hint: {'center_x': .5}
                    padding: dp(10)
                    cursor_color: 0, 0, 0, 1
                    line_anim: False

                MDRaisedButton:
                    text: 'Generate'
                    font_size: sp(25)
                    md_bg_color: app.theme_cls.primary_color
                    pos_hint: {'center_x': .5}
                    on_release:
                        root.create()

        MDSpinner:
            id: create_spin
            size_hint: None, None
            size: dp(38), dp(38)
            pos_hint: {'center_x': .5, 'center_y': .68}
            active: False