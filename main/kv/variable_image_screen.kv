<VariableImageScreen>
    name: 'variable_image_screen'

    MDFloatLayout:

        MDBoxLayout:
            orientation: 'vertical'

            MDTopAppBar:
                id: variable_top_bar
                specific_text_color: 'gray'
                type_height: 'small'
                md_bg_color: app.theme_cls.bg_dark
                left_action_items: [['arrow-left', lambda x: app.back(screen='main_screen')]]
                elevation: 0

            MDBoxLayout:
                id: image_section
                padding: 0, dp(15), 0, dp(15)

            MDBoxLayout:
                id: option_section
                orientation: 'vertical'
                spacing: dp(10)
                padding: dp(15)

                canvas:
                    Color:
                        rgba: .5, .3, .4, 1
                    Rectangle:
                        pos: self.pos
                        size: self.size

                MySegmentedControl:
                    pos_hint: {'center_x': .5}
                    on_active:
                        root.image_size = self.current_active_segment.text

                    MDSegmentedControlItem:
                        text: '256x256'

                    MDSegmentedControlItem:
                        text: '512x512'

                    MDSegmentedControlItem:
                        text: '1024x1024'

                MDBoxLayout:
                    orientation: 'horizontal'
                    pos_hint: {'center_x': .5}
                    adaptive_size: True

                    MDIconButton:
                        icon: 'minus-circle'
                        icon_size: dp(20)
                        theme_icon_color: "Custom"
                        icon_color: 'gray'
                        on_press:
                            self.icon_color = app.theme_cls.primary_color
                        on_release:
                            self.icon_color = 'gray'
                            root.image_count -= 1

                    MDTextFieldRect:
                        id: img_count
                        text: str(root.image_count)
                        halign: 'center'
                        pos_hint: {'center_y': .5}
                        size_hint: None, None
                        height: dp(30)
                        width: dp(50)
                        disabled: True

                    MDIconButton:
                        icon: 'plus-circle'
                        icon_size: dp(20)
                        theme_icon_color: "Custom"
                        icon_color: 'gray'
                        on_press:
                            self.icon_color = app.theme_cls.primary_color
                        on_release:
                            self.icon_color = 'gray'
                            root.image_count += 1

                MDFillRoundFlatButton:
                    text: 'Generate'
                    font_style: 'Button'
                    md_bg_color: 'gray'
                    pos_hint: {'center_x': .5}
                    on_release:
                        root.generate()

        MDSpinner:
            id: variable_spin
            size_hint: None, None
            size: dp(38), dp(38)
            pos_hint: {'center_x': .5, 'center_y': .68}
            active: False

        MDIconButton:
            id: add_image_button
            icon: 'image-plus'
            icon_size: dp(70)
            theme_icon_color: "Custom"
            disabled_color: 1, 1, 1, 0
            icon_color: 'gray'
            pos_hint: {"center_x": .5, "center_y": .7}
            on_release:
                app.file_manager_open()

        MDIconButton:
            icon: 'autorenew'
            icon_size: dp(20)
            theme_icon_color: "Custom"
            icon_color: 'gray'
            pos_hint: {"center_x": .5, "center_y": .46}
            on_release:
                root.reload_image()