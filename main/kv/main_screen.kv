#:import MainScreen main.screen
#:import ScrollEffect kivy.effects.scroll.ScrollEffect

<MainScreen>
    name: 'main_screen'
    md_bg_color: app.theme_cls.bg_light

    MDRelativeLayout:
        orientation: 'vertical'
        md_bg_color: root.md_bg_color if nav_drawer.state == 'close' else app.theme_cls.bg_dark

        MDTopAppBar:
            id: main_top_bar
            pos_hint: {'top': 1}
            type_height: 'small'
            md_bg_color: self.parent.md_bg_color
            left_action_items: [["menu", lambda x: nav_drawer.set_state("open")]]
            elevation: 0

        MDCircularLayout:
            size_hint_y: None
            height: root.height - main_top_bar.height
            row_spacing: min(self.size) * 0.1
            start_from: 90
            degree_spacing: 90
            circular_padding: dp(100)

            MDFloatingActionButton:
                icon: 'image'
                theme_icon_color: "Custom"
                md_bg_color: "#9b1fe8"
                on_release:
                    app.root.transition = MDSwapTransition()
                    app.root.current = 'create_image_screen'

            MDFloatingActionButton:
                icon: 'image-edit'
                theme_icon_color: "Custom"
                md_bg_color: "#9b1fe8"
                on_release:
                    app.root.transition = MDSwapTransition()
                    app.root.current = 'edit_image_screen'

            MDFloatingActionButton:
                icon: 'chat'
                theme_icon_color: "Custom"
                md_bg_color: "#9b1fe8"
                on_release:
                    app.root.transition = MDSwapTransition()
                    app.root.current = 'chat_gpt_screen'

            MDFloatingActionButton:
                icon: 'image-sync'
                theme_icon_color: "Custom"
                md_bg_color: "#9b1fe8"
                on_release:
                    app.root.transition = MDSwapTransition()
                    app.root.current = 'variable_image_screen'

    MDNavigationLayout:

        MDNavigationDrawer:
            id: nav_drawer
            radius: (0, 16, 16, 0)

            MDNavigationDrawerMenu:

                MDNavigationDrawerHeader:
                    id: nav_drawer_header
                    title: "Text"
                    title_font_size: '17sp'
                    text: "5 tokens"
                    source: "path"
                    spacing: dp(15)
                    padding: dp(10), 0, 0, dp(10)

                MDNavigationDrawerDivider:

                MDNavigationDrawerItem:
                    icon: "cog"
                    text: "settings"
                    theme_text_color: 'Custom'
                    text_color: 'white'
                    selected_color: "white"
                    on_release:
                        app.root.transition = MDSwapTransition()
                        app.root.current = 'settings_screen'

                MDNavigationDrawerDivider:

                MDNavigationDrawerItem:
                    id: collection
                    icon: 'image-multiple'
                    text: 'MyCollection'
                    theme_text_color: 'Custom'
                    text_color: 'white'
                    selected_color: "white"
                    on_release:
                        screen = app.root.current
                        app.root.ids.collection_screen.ids.selection_list.back_item = ['arrow-left', lambda x: app.back(screen=screen)]
                        nav_drawer.set_state("close")
                        app.root.transition = MDSwapTransition()
                        app.root.current = 'collection_screen'















