#:import LoginScreen screens
#:import MDSlideTransition kivymd.uix.transition.transition.MDSlideTransition
#:import platform kivy.utils


<LogTextField@MDTextField>
    theme_text_color: 'Custom'
    text_color_normal: 'white'
    text_color_focus: 'green'
    hint_text_color_normal: 'white'
    hint_text_color_focus: 'green'
    icon_left_color_normal: 'white'
    icon_left_color_focus: 'white'
    line_color_focus: 'green'
    helper_text_mode: 'on_error'



<LoginScreen>
    name: 'login_screen'
    md_bg_color: app.theme_cls.bg_light

    core: app

    MDFloatLayout:

        MDTopAppBar:
            pos_hint: {'top': 1}
            type_height: 'small'
            md_bg_color: root.md_bg_color
            left_action_items: [['arrow-left-bold', lambda x: app.back(screen='start_screen')]]
            elevation: 0

        MDLabel:
            text: 'Login'
            theme_text_color: 'Custom'
            text_color: "green"
            font_size: sp(50)
            halign: 'center'
            pos_hint: {'center_y': .8}

        MDBoxLayout:
            orientation: 'vertical'
            spacing: dp(15)
            pos_hint: {'center_x': .5, 'center_y': .5}
            adaptive_height: True
            size_hint_max_x: dp(300)

            LogTextField:
                id: email_field
                hint_text: 'email'
                icon_left: 'email'
                pos_hint: {'center_x': .5}

            MDRelativeLayout:
                size_hint: 1, None
                height: password_field.height
                pos_hint: {'center_x': .5}

                LogTextField:
                    id: password_field
                    icon_left: 'key-variant'
                    password: True
                    hint_text: 'Password'
                    unfocus_on_touch: False if platform == 'android' else True

                MDIconButton:
                    icon: "eye"
                    pos_hint: {"center_y": .5}
                    theme_text_color: "Custom"
                    text_color: 'white'
                    pos: password_field.width - self.width, 0
                    on_release:
                        self.icon = "eye" if self.icon == "eye-off" else "eye-off"
                        password_field.password = False if password_field.password is True else True

        MDBoxLayout:
            orientation: 'horizontal'
            size_hint_x: None
            width: dp(150)
            pos_hint: {'center_x': .5, 'center_y': .3}
            adaptive_height: True


            MDRaisedButton:
                text: 'Login'
                font_size: sp(20)
                size_hint: 1, 1
                md_bg_color: 'green'
                on_release:
                    root.login(email_field.text, password_field.text)

        MDBoxLayout:
            orientation: 'vertical'
            spacing: dp(20)
            pos_hint: {'center_x': .5, 'center_y': .1}
            adaptive_height: True

            MDRoundFlatIconButton:
                text: 'Continue with Google'
                text_color: 'white'
                icon: 'assets/img/google_icon.png'
                line_color: 1, 1, 1, 1
                font_size: sp(15)
                pos_hint: {'center_x': .5}
                on_release:
                    root.google_login()

            MDTextButton:
                text: "Forgot Password?"
                theme_text_color: "Custom"
                font_size: sp(25)
                text_color: "orange"
                pos_hint: {'center_x': .5}
                on_release:
                    root.forgot_password()