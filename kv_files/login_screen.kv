#:import LoginScreen screens.login
#:import MDSlideTransition kivymd.uix.transition.transition.MDSlideTransition
#:import platform kivy.utils


<LogTextField@MDTextField>
    mode: "outlined"
    theme_text_color: 'Custom'
    text_color_normal: 'white'
    text_color_focus: 'white'


<LoginScreen>
    name: 'login_screen'

    MDFloatLayout:

        MDTopAppBar:
            pos_hint: {'top': 1}
            type: 'small'
            theme_bg_color: 'Custom'
            md_bg_color: self.theme_cls.backgroundColor

            MDTopAppBarLeadingButtonContainer:

                MDActionTopAppBarButton:
                    icon: 'arrow-left-bold'
                    theme_icon_color: 'Custom'
                    icon_color: self.theme_cls.primaryColor
                    ripple_effect: False
                    focus_behavior: False
                    on_release:
                        app.back(screen='start_screen')

            MDTopAppBarTitle:
                text: 'sign in'
                theme_font_name: "Custom"
                font_name: 'Hacked'


        MDBoxLayout:
            orientation: 'vertical'
            spacing: dp(30)
            pos_hint: {'center_x': .5, 'center_y': .6}
            adaptive_height: True
            size_hint_max_x: dp(300)

            LogTextField:
                id: email_field
                pos_hint: {'center_x': .5}

                MDTextFieldHintText:
                    text: "Email"
                    text_color_normal: 'white'
                    theme_font_name: "Custom"
                    font_name: 'Hacked'

            MDRelativeLayout:
                size_hint: 1, None
                height: password_field.height
                pos_hint: {'center_x': .5}

                LogTextField:
                    id: password_field
                    password: True

                    MDTextFieldHintText:
                        text: 'Password'
                        text_color_normal: 'white'
                        theme_font_name: "Custom"
                        font_name: 'Hacked'

                MDIconButton:
                    icon: "eye"
                    pos_hint: {"center_y": .45}
                    ripple_effect: False
                    focus_behavior: False
                    theme_icon_color: "Custom"
                    icon_color: password_field.text_color_focus if password_field.focus else 'white'
                    pos: password_field.width - self.width, 0
                    on_release:
                        self.icon = "eye" if self.icon == "eye-off" else "eye-off"
                        password_field.password = False if password_field.password is True else True

            MDBoxLayout:
                orientation: 'vertical'
                pos_hint: {'center_x': .5}
                adaptive_height: True
                size_hint_max_x: dp(300)
                spacing: dp(15)

                MDBoxLayout:
                    orientation: 'horizontal'
                    adaptive_height: True
                    size_hint_max_x: dp(300)
                    pos_hint: {'center_x': .5}

                    MDButton:
                        style: "filled"
                        theme_width: 'Custom'
                        size_hint_x: 1
                        radius: dp(10)
                        on_release:
                            root.login(email_field.text, password_field.text)

                        MDButtonText:
                            text: 'Login'
                            pos_hint: {'center_x': .5}
                            theme_text_color: 'Custom'
                            text_color: 'white'
                            theme_font_name: 'Custom'
                            font_name: 'Hacked'
                            font_style: 'Display'
                            role: 'small'


                MDButton:
                    style: 'text'
                    pos_hint: {'center_x': .5}
                    ripple_effect: False
                    focus_behavior: False
                    on_release:
                        root.forgot_password()

                    MDButtonText:
                        text: 'Forgot Password?'
                        theme_text_color: "Custom"
                        text_color: "orange"
                        font_style: 'Headline'
                        theme_font_name: "Custom"
                        font_name: 'Hacked'
                        role: 'small'


#        MDBoxLayout:
#            orientation: 'vertical'
#            spacing: dp(20)
#            pos_hint: {'center_x': .5, 'center_y': .1}
#            adaptive_height: True
#
#            MDRoundFlatIconButton:
#                text: 'Continue with Google'
#                text_color: 'white'
#                icon: 'assets/img/google_icon.png'
#                line_color: 1, 1, 1, 1
#                font_size: sp(15)
#                pos_hint: {'center_x': .5}
#                on_release:
#                    root.google_login()

