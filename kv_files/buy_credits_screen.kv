#:import BuyCreditsScreen screens

<ListItemWithLabel@OneLineAvatarIconListItem>:
    recent: False
    icon: ""
    method_name: ""
    right_label_text: "Recent" if self.recent else ""

    IconLeftWidget:
        icon: root.icon

    RightLabel:
        text: root.right_label_text
        theme_text_color: "Custom"
        text_color: [0,0,0,.4] if app.theme_cls.theme_style == "Light" else [1, 1, 1, 1]
        font_size: sp(12)


<BuyCreditsScreen>
    name: 'buy_credits_screen'
    md_bg_color: app.theme_cls.bg_light

    MDFloatLayout:

        MDTopAppBar:
            id: buy_top_bar
            pos_hint: {'top': 1}
            type_height: 'small'
            title: 'buy credits'
            anchor_title: 'left'
            md_bg_color: root.md_bg_color
            left_action_items: [['arrow-left-bold', lambda x: app.back(screen='main_screen')]]
            elevation: 0

        MDBoxLayout:
            orientation: 'vertical'
            spacing: dp(15)
            size_hint_x: None
            width: dp(250)
            pos_hint: {'center_x': .5, 'center_y': .5}
            adaptive_height: True

            MDBoxLayout:
                orientation: 'horizontal'
                spacing: dp(5)
                size_hint_y: None
                height: button1.height

                MDLabel:
                    text: '$99.99'

                MDRaisedButton:
                    id: button1
                    text: '4000 credits'
                    font_size: sp(25)
                    md_bg_color: app.theme_cls.primary_color
                    on_release:
                        root.open_payment_layout("onetime")

            MDBoxLayout:
                orientation: 'horizontal'
                spacing: dp(5)
                size_hint_y: None
                height: button2.height

                MDLabel:
                    text: '$79.99'

                MDRaisedButton:
                    id: button2
                    text: '3000 credits'
                    font_size: sp(25)
                    md_bg_color: app.theme_cls.primary_color
                    on_release:
                        root.open_payment_layout("onetime")

            MDBoxLayout:
                orientation: 'horizontal'
                spacing: dp(5)
                size_hint_y: None
                height: button3.height

                MDLabel:
                    text: '$59.99'

                MDRaisedButton:
                    id: button3
                    text: '2000 credits'
                    font_size: sp(25)
                    md_bg_color: app.theme_cls.primary_color
                    on_release:
                        root.open_payment_layout("onetime")

            MDBoxLayout:
                orientation: 'horizontal'
                spacing: dp(5)
                size_hint_y: None
                height: button4.height

                MDLabel:
                    text: '$39.99'

                MDRaisedButton:
                    id: button4
                    text: '1000 credits'
                    font_size: sp(25)
                    md_bg_color: app.theme_cls.primary_color
                    on_release:
                        root.open_payment_layout('onetime')

    MDBottomSheet:
        id: bottom_sheet
        bg_color: "grey"
        max_opening_height: self.height
        default_opening_height: self.max_opening_height
        adaptive_height: True


        MDBottomSheetContent:
            padding: "5dp"

            MDBoxLayout:
                orientation: 'vertical'
                size_hint_y: None
                height: '200dp'

                MDBoxLayout:
                    size_hint_y: None
                    height: dp(40)

                    Widget:
                        size_hint_x: None
                        width: dp(20)

                    MDLabel:
                        text: 'Select Payment Method'
                        font_size: sp(14)
                        bold: True
                        theme_text_color: 'Custom'
                        text_color: [0, 0, 0, .5] if app.theme_cls.theme_style == 'Light' else [1, 1, 1, 1]

                ScrollView:

                    MDGridLayout:
                        cols: 1
                        adaptive_height: True

                        ListItemWithLabel:
                            icon: "google-play"
                            text: "Google Play"
                            method_name: "gplay"
                            recent: True
                            on_release:
                                root.initiate_purchase(self.method_name)



