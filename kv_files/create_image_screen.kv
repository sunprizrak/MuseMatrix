#:import CreateImageScreen screens

<CreateImageScreen>
    name: 'create_image_screen'

    # prompt: input_prompt.text

    MDFloatLayout:

        MDBoxLayout:
            orientation: 'vertical'

            MDTopAppBar:
                id: create_top_bar
                type: 'small'
                theme_bg_color: 'Custom'
                md_bg_color: root.md_bg_color

                MDTopAppBarLeadingButtonContainer:

                    MDActionTopAppBarButton:
                        icon: 'arrow-left-bold'
                        ripple_effect: False
                        focus_behavior: False
                        on_release:
                            app.back(screen='main_screen')

                MDTopAppBarTitle:
                    text: 'create image'
                    theme_font_name: "Custom"
                    font_name: 'Hacked'

            MDBoxLayout:
                id: image_section

                Image:
                    source: 'assets/img/default.png'
                    mipmap: True

            MDBoxLayout:
                id: option_section
                orientation: 'vertical'
                adaptive_height: True

                MDBoxLayout:
                    orientation: 'horizontal'
                    pos_hint: {'center_x': .5}
                    size_hint_x: None
                    width: dp(140)
                    adaptive_height: True

                    MDIconButton:
                        icon: 'minus-box-outline'
                        theme_font_size: "Custom"
                        font_size: sp(30)
                        ripple_effect: False
                        focus_behavior: False
                        theme_icon_color: "Custom"
                        icon_color: app.theme_cls.secondaryContainerColor
                        on_release:
                            root.image_count -= 1

                    MDLabel:
                        id: img_count
                        text: str(root.image_count)
                        theme_font_name: "Custom"
                        font_name: 'Hacked'
                        theme_font_size: 'Custom'
                        font_size: sp(30)
                        halign: 'center'


                    MDIconButton:
                        icon: 'plus-box-outline'
                        theme_font_size: "Custom"
                        font_size: sp(30)
                        ripple_effect: False
                        focus_behavior: False
                        theme_icon_color: "Custom"
                        icon_color: app.theme_cls.secondaryContainerColor
                        on_release:
                            root.image_count += 1

                MDBoxLayout:
                    orientation: 'vertical'
                    pos_hint: {'center_x': .5}
                    adaptive_height: True

                    MySegmentedButton:
                        type: 'medium'
                        selected_icon_color: 'green'


                        MDSegmentedButtonItem:
                            on_active:
                                root.image_size = '256x256' if self.active else root.image_size

                            MDSegmentButtonLabel:
                                text: '256x256'

                        MDSegmentedButtonItem:
                            on_active:
                                root.image_size = '512x512' if self.active else root.image_size

                            MDSegmentButtonLabel:
                                text: '512x512'

                        MDSegmentedButtonItem:
                            on_active:
                                root.image_size = '1024x1024' if self.active else root.image_size

                            MDSegmentButtonLabel:
                                text: '1024x1024'

                    MDBoxLayout:
                        md_bg_color: app.theme_cls.secondaryContainerColor
                        size_hint_y: None
                        height: dp(150)
                        padding: [dp(3), dp(1), dp(3), dp(3)]
                        pos_hint: {'center_x': .5}

                        TextInput:
                            id: input_prompt
                            multiline: True
                            auto_indent: True
                            padding: dp(10)
                            border: [2, 2, 2, 2]
                            cursor_color: app.theme_cls.secondaryContainerColor
                            cursor_width: sp(3)
                            font_size: sp(17)
                            hint_text: 'Enter the prompt'
                            pos_hint: {'center_x': .5}

                    MDBoxLayout:
                        md_bg_color: app.theme_cls.secondaryContainerColor
                        padding: [dp(3), dp(0), dp(3), dp(3)]
                        adaptive_height: True

                        MDButton:
                            style: 'filled'
                            theme_width: 'Custom'
                            size_hint_x: 1
                            radius: dp(10)
                            on_release:
                                root.generate()

                            MDButtonText:
                                text: 'Generate'
                                theme_text_color: 'Custom'
                                text_color: 'white'
                                theme_font_name: 'Custom'
                                font_name: 'Hacked'
                                font_style: 'Display'
                                role: 'small'
#
#        MDSpinner:
#            id: create_spin
#            size_hint: None, None
#            size: dp(38), dp(38)
#            pos_hint: {'center_x': .5, 'center_y': .68}
#            active: False