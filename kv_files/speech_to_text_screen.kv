#:import SpeechToTextScreen screens


<SpeechToTextScreen>
    name: 'speech_to_text_screen'

    MDFloatLayout:
        id: speech_layout

        MDBoxLayout:
            orientation: 'vertical'

            MyTopAppBar:
                id: speech_top_bar
                type_height: 'small'
                title: 'speech to text'
                anchor_title: 'left'
                md_bg_color: root.md_bg_color
                left_action_items: [['arrow-left-bold', lambda x: app.back(screen='main_screen')]]
                elevation: 0

            MDBoxLayout:
                orientation: 'vertical'
                adaptive_height: True

                MDBoxLayout:
                    id: sound_layout
                    orientation: 'horizontal'
                    spacing: dp(10)
                    padding: dp(5)
                    adaptive_height: True

                    MDBoxLayout:
                        id: sound
                        orientation: 'horizontal'
                        icon: 'music' if root.sound else ''
                        text: ''
                        spacing: dp(5)
                        pos_hint: {'center_x': .5}

                        MDIcon:
                            id: icon
                            icon: self.parent.icon
                            adaptive_size: True

                        MDLabel:
                            id: name
                            text: self.parent.text
                            font_style: 'Sound_name'
                            adaptive_size: True

                    MDBoxLayout:
                        id: sound_option
                        orientation: 'horizontal'
                        icon_play: 'play' if root.sound else ''
                        icon_stop: 'stop' if root.sound else ''
                        pos_hint: {"center_x": .5}
                        adaptive_size: True

                        MyIconButton:
                            icon: self.parent.icon_play
                            size_hint: None, None
                            size: icon.size
                            disable: False if root.sound else True
                            on_release:
                                root.sound_play()

                        MyIconButton:
                            icon: self.parent.icon_stop
                            size_hint: None, None
                            size: icon.size
                            disable: False if root.sound else True
                            on_release:
                                root.sound_stop()


                    MyIconButton:
                        id: delete_button
                        icon: 'close' if root.sound else ''
                        size_hint: None, None
                        size: icon.size
                        disable: False if root.sound else True
                        on_release:
                            root.delete_sound()

            MDBoxLayout:
                id: audio_transcript
                text: ''
                pos_hint: {'center_x': .5}

                MDScrollView:
                    do_scroll_x: False
                    scroll_y: 1
                    effect_cls: ScrollEffect
                    padding: dp(5)

                    MDLabel:
                        id: audio_text
                        text: self.parent.parent.text
                        padding: dp(10), dp(10)
                        font_style: 'Sound_name'
                        adaptive_height: True

        MyIconButton:
            id: add_sound_button
            icon: 'music-note-plus'
            icon_size: dp(70)
            theme_icon_color: "Custom"
            disabled: True if root.sound else False
            disabled_color: 1, 1, 1, 0
            icon_color: 'gray'
            md_bg_color: root.md_bg_color
            pos_hint: {"center_x": .5, "center_y": .5}
            on_release:
                app.file_manager_open()

        MDSpinner:
            id: speech_spin
            size_hint: None, None
            size: dp(38), dp(38)
            pos_hint: {'center_x': .5, 'center_y': .5}
            active: False



