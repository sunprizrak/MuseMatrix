#:import BuyCoinsScreen screens

<ListItemWithLabel@OneLineAvatarIconListItem>:
    recent: False
    icon: ""
    method_name: ""
    right_label_text: "Recent" if self.recent else ""

    IconLeftWidget:
        icon: root.icon

    RightLabel:
        text: root.right_label_text
        theme_text_color: "Custom"
        text_color: [0,0,0,.4] if app.theme_cls.theme_style == "Light" else [1, 1, 1, 1]
        font_size: sp(12)


<BuyButton@MDRaisedButton>:
    font_size: sp(25)
    size_hint_x: .5
    md_bg_color: app.theme_cls.primary_color


<BuyCoinsScreen>
    name: 'buy_coins_screen'

    MDFloatLayout:
        md_bg_color: root.md_bg_color if bottom_sheet.state == 'close' else app.theme_cls.bg_dark

        MDTopAppBar:
            id: buy_top_bar
            pos_hint: {'top': 1}
            type_height: 'small'
            title: 'Buy coins'
            anchor_title: 'left'
            md_bg_color: self.parent.md_bg_color
            left_action_items: [['arrow-left-bold', lambda x: app.back(screen='main_screen')]]
            elevation: 0

        MDGridLayout:
            cols: 2
            spacing: dp(10)
            size_hint_x: None
            width: dp(250)
            pos_hint: {'center_x': .5, 'center_y': .5}
            adaptive_height: True

            MDLabel:
                text: '$99.99'

            BuyButton:
                text: '20000 coins'
                on_release:
                    root.open_payment_layout(root.PROD_20000)

            MDLabel:
                text: '$24.99'

            BuyButton:
                text: '5000 coins'
                on_release:
                    root.open_payment_layout(root.PROD_5000)

            MDLabel:
                text: '$17.99'

            BuyButton:
                text: '3600 coins'
                on_release:
                    root.open_payment_layout(root.PROD_3600)

            MDLabel:
                text: '$7.99'

            BuyButton:
                text: '1600 coins'
                on_release:
                    root.open_payment_layout(root.PROD_1600)

            MDLabel:
                text: '$4.99'

            BuyButton:
                text: '1000 coins'
                on_release:
                    root.open_payment_layout(root.PROD_1000)

            MDLabel:
                text: '$1.99'

            BuyButton:
                text: '400  coins'
                on_release:
                    root.open_payment_layout(root.PROD_400)

            MDLabel:
                text: '$0.99'

            BuyButton:
                text: '200  coins'
                on_release:
                    root.open_payment_layout(root.PROD_200)

    MDBottomSheet:
        id: bottom_sheet
        bg_color: root.md_bg_color
        radius: [dp(25), dp(25), 0, 0]
        elevation: dp(2) if self.state == 'open' else 0
        shadow_color: app.theme_cls.primary_color
        max_opening_height: self.height
        default_opening_height: self.max_opening_height
        adaptive_height: True


        MDBottomSheetContent:
            padding: "5dp"

            MDBoxLayout:
                orientation: 'vertical'
                size_hint_y: None
                height: '200dp'

                MDBoxLayout:
                    size_hint_y: None
                    height: dp(40)

                    MDLabel:
                        text: 'Select Payment Method'
                        font_size: sp(16)
                        halign: 'center'
                        theme_text_color: 'Custom'
                        text_color: [0, 0, 0, .5] if app.theme_cls.theme_style == 'Light' else [1, 1, 1, 1]

                MDSeparator:
                    size_hint_x: .7
                    pos_hint: {'center_x': .5}
                    md_bg_color: app.theme_cls.primary_color

                MDScrollView:
                    do_scroll_x: False
                    effect_cls: ScrollEffect

                    MDGridLayout:
                        cols: 1
                        adaptive_height: True

                        ListItemWithLabel:
                            icon: "assets/img/google_play.png"
                            text: "Google Play"
                            method_name: "gplay"
                            recent: True
                            on_release:
                                root.initiate_purchase(self.method_name)



