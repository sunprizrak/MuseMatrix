#:import EditImageScreen screens.edit_image
#:import EditImage widgets.EditImage
#:import DrawWidget widgets.EditImage

<EditImageScreen>
    name: 'edit_image_screen'

    # prompt: input_prompt.text

    MDFloatLayout:

        MDBoxLayout:
            orientation: 'vertical'

            MDTopAppBar:
                id: edit_top_bar
                type: 'small'
                md_bg_color: self.theme_cls.backgroundColor

                MDTopAppBarLeadingButtonContainer:

                    MDActionTopAppBarButton:
                        icon: 'arrow-left-bold'
                        ripple_effect: False
                        focus_behavior: False
                        on_release:
                            app.back(screen='main_screen')

                MDTopAppBarTitle:
                    text: 'edit image'
                    theme_font_name: "Custom"
                    font_name: 'Hacked'

            MDFloatLayout:
                id: image_section

#                MDFabButton:
#                    id: add_image_button
#                    icon: 'image-plus'
#                    style: 'large'
#                    theme_font_size: "Custom"
#                    font_size: sp(58)
#                    pos_hint: {"center_x": .5, 'center_y': .55}
#                    on_release:
#                        app.file_manager_open()

                EditImage
                    id: test
                    source: 'test_edit_image/raining_tacos.jpg'
                    fit_mode: 'contain'
                    pos_hint: {"center_x": .5, 'center_y': .5}



            MDBoxLayout:
                orientation: 'horizontal'
                adaptive_height: True

                MDButton:
                    style: 'elevated'
                    radius: dp(10)
                    on_release:
                        root.test_edit()

                    MDButtonText:
                        text: 'next'
                        theme_font_name: 'Custom'
                        font_name: 'Hacked'



#            MDBoxLayout:
#                id: image_section
#
#            MDBoxLayout:
#                id: option_section
#                orientation: 'vertical'
#                adaptive_height: True
#
#                MDBoxLayout:
#                    orientation: 'horizontal'
#                    pos_hint: {'center_x': .5}
#                    size_hint_x: None
#                    width: dp(140)
#                    adaptive_height: True
#
#                    MyIconButton:
#                        icon: 'minus-box-outline'
#                        icon_size: sp(30)
#                        theme_icon_color: "Custom"
#                        icon_color: app.theme_cls.primary_color
#                        md_bg_color: root.md_bg_color
#                        on_release:
#                            root.image_count -= 1
#
#                    MDLabel:
#                        id: img_count
#                        text: str(root.image_count)
#                        font_size: sp(30)
#                        halign: 'center'
#
#                    MyIconButton:
#                        icon: 'plus-box-outline'
#                        icon_size: sp(30)
#                        theme_icon_color: "Custom"
#                        icon_color: app.theme_cls.primary_color
#                        md_bg_color: root.md_bg_color
#                        on_release:
#                            root.image_count += 1
#
#                MDBoxLayout:
#                    orientation: 'vertical'
#                    pos_hint: {'center_x': .5}
#                    adaptive_height: True
#
#                    MySegmentedControl:
#                        md_bg_color: app.theme_cls.primary_color
#                        segment_color: root.md_bg_color
#                        separator_color: "white"
#                        radius: [dp(15), dp(15), 0, 0]
#                        on_active:
#                            root.image_size = self.current_active_segment.text
#
#                        MDSegmentedControlItem:
#                            text: '256x256'
#
#                        MDSegmentedControlItem:
#                            text: '512x512'
#
#                        MDSegmentedControlItem:
#                            text: '1024x1024'
#
#                    MDBoxLayout:
#                        md_bg_color: app.theme_cls.primary_color
#                        size_hint_y: None
#                        height: dp(150)
#                        padding: [dp(3), dp(1), dp(3), dp(3)]
#                        pos_hint: {'center_x': .5}
#
#                        MDTextFieldRect:
#                            id: input_prompt
#                            multiline: True
#                            auto_indent: True
#                            padding: dp(10)
#                            cursor_color: app.theme_cls.primary_color
#                            cursor_width: sp(3)
#                            font_size: sp(17)
#                            hint_text: 'Enter the prompt'
#                            line_anim: False
#                            pos_hint: {'center_x': .5}
#
#                    MDBoxLayout:
#                        md_bg_color: app.theme_cls.primary_color
#                        padding: [dp(3), dp(0), dp(3), dp(3)]
#                        adaptive_height: True
#
#                        MDRaisedButton:
#                            text: 'Generate'
#                            font_size: sp(25)
#                            md_bg_color: app.theme_cls.primary_color
#                            size_hint_x: 1
#                            on_release:
#                                root.edit_image()
#
        MDCircularProgressIndicator:
            id: edit_spin
            size_hint: None, None
            size: dp(38), dp(38)
            pos_hint: {'center_x': .5, 'center_y': .5}
            active: False



