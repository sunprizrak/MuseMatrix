#:import CollectionScreen screens.collection
#:import MySelectionList widgets.MySelectionList

<CollectionScreen>
    name: 'collection_screen'

    MDBoxLayout:
        orientation: 'vertical'

        MDTopAppBar:
            id: collection_app_bar
            type: 'small'
            theme_bg_color: 'Custom'
            md_bg_color: self.theme_cls.backgroundColor

            MDTopAppBarLeadingButtonContainer:
                id: left_button

                MDActionTopAppBarButton:
                    icon: 'arrow-left-bold'
                    theme_icon_color: 'Custom'
                    icon_color: self.theme_cls.primaryColor
                    ripple_effect: False
                    focus_behavior: False
                    on_release:
                        app.back(screen='main_screen')

            MDTopAppBarTitle:
                id: collection_app_bar_title
                text: ' '
                theme_font_name: "Custom"
                font_name: 'Hacked'

            MDTopAppBarTrailingButtonContainer:
                adaptive_width: True

                MDActionTopAppBarButton:
                    id: button_delete
                    icon: "delete"
                    ripple_effect: False
                    focus_behavior: False
                    disabled: True
                    theme_icon_color: 'Custom'
                    icon_color: root.md_bg_color
                    on_release:
                        root.delete_images(selection_list.selected_items)

                MDActionTopAppBarButton:
                    icon: "dots-vertical"
                    theme_icon_color: 'Custom'
                    icon_color: self.theme_cls.primaryColor
                    ripple_effect: False
                    focus_behavior: False
                    on_release:
                        root.menu_callback(self)

        MDScrollView:
            effect_cls: ScrollEffect
            do_scroll_x: False
            do_scroll_y: True

            MySelectionList:
                id: selection_list
                cols: 4
                padding: dp(2)
                spacing: dp(2)
                row_default_height: (self.width - self.cols * self.spacing[0]) / self.cols
                row_force_default: True
                col_default_width: (self.width - (self.cols * self.spacing[0] + self.padding[0])) / self.cols
                col_force_default: True
                adaptive_height: True
